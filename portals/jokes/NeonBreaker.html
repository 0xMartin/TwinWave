<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Neon Breaker</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{background:#111;overflow:hidden;font-family:Arial,sans-serif;touch-action:none}
canvas{display:block;background:linear-gradient(180deg,#1a0033 0%,#000 100%)}
#ui{position:absolute;top:15px;left:15px;color:#0ff;font-size:18px;text-shadow:0 0 8px #0ff;pointer-events:none;font-weight:bold}
#lives{position:absolute;top:15px;right:15px;color:#f0f;font-size:18px;text-shadow:0 0 8px #f0f;pointer-events:none;font-weight:bold}
#msg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:28px;text-align:center;display:none;text-shadow:0 0 15px #0ff;white-space:pre-line;background:rgba(0,0,0,0.8);padding:30px;border-radius:10px;border:2px solid #0ff}
button{position:absolute;top:65%;left:50%;transform:translateX(-50%);padding:15px 40px;font-size:20px;background:#0ff;color:#000;border:none;border-radius:8px;cursor:pointer;display:none;font-weight:bold;box-shadow:0 0 20px #0ff}
button:hover,button:active{background:#fff;box-shadow:0 0 30px #fff}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="ui">SCORE: <span id="score">0</span> | LEVEL: <span id="level">1</span></div>
<div id="lives">LIVES: <span id="livesCount">3</span></div>
<div id="msg"></div>
<button onclick="start()">START GAME</button>
<script>
const c=document.getElementById('c');
const ctx=c.getContext('2d');
c.width=window.innerWidth;
c.height=window.innerHeight;

let paddle={x:c.width/2,y:c.height-40,w:100,h:15,speed:8};
let ball={x:c.width/2,y:c.height-60,vx:0,vy:0,r:8,active:false};
let bricks=[];
let particles=[];
let powerups=[];
let score=0;
let level=1;
let lives=3;
let keys={};
let touchX=null;

window.addEventListener('keydown',e=>keys[e.key]=true);
window.addEventListener('keyup',e=>keys[e.key]=false);
window.addEventListener('resize',()=>{c.width=window.innerWidth;c.height=window.innerHeight;resetLevel()});
c.addEventListener('touchmove',e=>{
e.preventDefault();
touchX=e.touches[0].clientX;
});
c.addEventListener('touchend',()=>{
if(!ball.active){
ball.active=true;
const angle=-Math.PI/4+(Math.random()*Math.PI/2);
ball.vx=Math.cos(angle)*6;
ball.vy=Math.sin(angle)*6;
}
});

const colors=['#ff0080','#00ff80','#0080ff','#ff8000','#8000ff','#ffff00','#00ffff','#ff00ff'];

function start(){
score=0;level=1;lives=3;
paddle.x=c.width/2;
resetLevel();
document.querySelector('button').style.display='none';
document.getElementById('msg').style.display='none';
}

function resetLevel(){
bricks=[];
const rows=4+level;
const cols=Math.floor(c.width/80);
const bw=c.width/cols-10;
const bh=25;
for(let r=0;r<rows;r++){
for(let col=0;col<cols;col++){
bricks.push({
x:col*(bw+10)+5,
y:r*(bh+10)+60,
w:bw,h:bh,
color:colors[r%colors.length],
hp:Math.min(r+1,3)
});
}
}
ball={x:c.width/2,y:c.height-60,vx:0,vy:0,r:8,active:false};
paddle.x=c.width/2;
}

function explode(x,y,color){
for(let i=0;i<15;i++){
particles.push({
x:x,y:y,
vx:(Math.random()-0.5)*6,
vy:(Math.random()-0.5)*6,
life:30,
color:color
});
}
}

function update(){
if(keys['ArrowLeft']||keys['a'])paddle.x=Math.max(paddle.w/2,paddle.x-paddle.speed);
if(keys['ArrowRight']||keys['d'])paddle.x=Math.min(c.width-paddle.w/2,paddle.x+paddle.speed);
if((keys[' ']||keys['ArrowUp']||keys['w'])&&!ball.active){
ball.active=true;
const angle=-Math.PI/3+(Math.random()*Math.PI/3);
ball.vx=Math.cos(angle)*6;
ball.vy=Math.sin(angle)*6;
}

if(touchX!==null){
paddle.x=touchX;
touchX=null;
}

if(ball.active){
ball.x+=ball.vx;
ball.y+=ball.vy;

if(ball.x-ball.r<0||ball.x+ball.r>c.width){
ball.vx*=-1;
ball.x=ball.x<c.width/2?ball.r:c.width-ball.r;
}
if(ball.y-ball.r<0){
ball.vy*=-1;
ball.y=ball.r;
}

if(ball.y-ball.r<paddle.y+paddle.h&&ball.y+ball.r>paddle.y&&
ball.x>paddle.x-paddle.w/2&&ball.x<paddle.x+paddle.w/2){
ball.vy=-Math.abs(ball.vy);
const hitPos=(ball.x-paddle.x)/(paddle.w/2);
ball.vx=hitPos*5;
ball.y=paddle.y-ball.r;
}

bricks=bricks.filter(b=>{
if(ball.x+ball.r>b.x&&ball.x-ball.r<b.x+b.w&&
ball.y+ball.r>b.y&&ball.y-ball.r<b.y+b.h){
b.hp--;
explode(b.x+b.w/2,b.y+b.h/2,b.color);
score+=10;
if(ball.x<b.x||ball.x>b.x+b.w)ball.vx*=-1;
else ball.vy*=-1;
if(b.hp<=0){
if(Math.random()<0.15)powerups.push({x:b.x+b.w/2,y:b.y+b.h/2,vy:3,type:Math.random()<0.5?'expand':'multi'});
return false;
}
}
return true;
});

if(ball.y>c.height){
lives--;
if(lives<=0){
document.getElementById('msg').textContent='GAME OVER!\nScore: '+score+'\nLevel: '+level;
document.getElementById('msg').style.display='block';
document.querySelector('button').style.display='block';
}else{
ball={x:paddle.x,y:paddle.y-20,vx:0,vy:0,r:8,active:false};
}
}

if(bricks.length===0){
level++;
resetLevel();
}
}else{
ball.x=paddle.x;
ball.y=paddle.y-20;
}

powerups=powerups.filter(p=>{
p.y+=p.vy;
if(p.y>paddle.y-10&&p.y<paddle.y+paddle.h&&
p.x>paddle.x-paddle.w/2&&p.x<paddle.x+paddle.w/2){
if(p.type==='expand')paddle.w=Math.min(150,paddle.w+20);
explode(p.x,p.y,'#0f0');
return false;
}
return p.y<c.height;
});

particles=particles.filter(p=>{
p.x+=p.vx;
p.y+=p.vy;
p.vy+=0.2;
p.life--;
return p.life>0;
});

document.getElementById('score').textContent=score;
document.getElementById('level').textContent=level;
document.getElementById('livesCount').textContent=lives;
}

function draw(){
const grad=ctx.createLinearGradient(0,0,0,c.height);
grad.addColorStop(0,'#1a0033');
grad.addColorStop(1,'#000');
ctx.fillStyle=grad;
ctx.fillRect(0,0,c.width,c.height);

for(let i=0;i<50;i++){
const x=Math.random()*c.width;
const y=Math.random()*c.height/2;
ctx.fillStyle='rgba(255,255,255,0.3)';
ctx.fillRect(x,y,2,2);
}

bricks.forEach(b=>{
ctx.fillStyle=b.color;
ctx.shadowBlur=15;
ctx.shadowColor=b.color;
ctx.fillRect(b.x,b.y,b.w,b.h);
ctx.strokeStyle='rgba(255,255,255,0.3)';
ctx.lineWidth=2;
ctx.strokeRect(b.x,b.y,b.w,b.h);
if(b.hp>1){
ctx.fillStyle='#fff';
ctx.font='bold 14px Arial';
ctx.textAlign='center';
ctx.fillText(b.hp,b.x+b.w/2,b.y+b.h/2+5);
}
ctx.shadowBlur=0;
});

ctx.fillStyle='#0ff';
ctx.shadowBlur=20;
ctx.shadowColor='#0ff';
ctx.fillRect(paddle.x-paddle.w/2,paddle.y,paddle.w,paddle.h);
ctx.shadowBlur=0;

const grad2=ctx.createRadialGradient(ball.x,ball.y,0,ball.x,ball.y,ball.r);
grad2.addColorStop(0,'#fff');
grad2.addColorStop(1,'#ff0');
ctx.fillStyle=grad2;
ctx.shadowBlur=15;
ctx.shadowColor='#ff0';
ctx.beginPath();
ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
ctx.fill();
ctx.shadowBlur=0;

powerups.forEach(p=>{
ctx.fillStyle=p.type==='expand'?'#00ff00':'#ffff00';
ctx.shadowBlur=20;
ctx.shadowColor=ctx.fillStyle;
ctx.beginPath();
ctx.arc(p.x,p.y,10,0,Math.PI*2);
ctx.fill();
ctx.fillStyle='#000';
ctx.font='bold 12px Arial';
ctx.textAlign='center';
ctx.fillText(p.type==='expand'?'W':'M',p.x,p.y+4);
ctx.shadowBlur=0;
});

particles.forEach(p=>{
ctx.fillStyle=p.color;
ctx.globalAlpha=p.life/30;
ctx.shadowBlur=10;
ctx.shadowColor=p.color;
ctx.beginPath();
ctx.arc(p.x,p.y,3,0,Math.PI*2);
ctx.fill();
});
ctx.globalAlpha=1;
ctx.shadowBlur=0;
}

function loop(){
update();
draw();
requestAnimationFrame(loop);
}

document.getElementById('msg').textContent='NEON BREAKER\n\nUse ← → or Touch to Move\nPress SPACE or Tap to Launch';
document.getElementById('msg').style.display='block';
document.querySelector('button').style.display='block';
loop();
</script>
</body>
</html>